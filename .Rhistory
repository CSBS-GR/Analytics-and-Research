dput(meta_articles.m)
structure(list(ID = 1:9, Source.File = structure(c(1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L, 2L), .Label = c("aaa", "aab"), class = "factor"),
Newspaper = structure(c(2L, 2L, 2L, 1L, 2L, 3L, 4L, 4L, 5L
), .Label = c("Financial Times", "The Guardian", "The Mirror",
"The Sun", "The Times"), class = "factor"), Date = structure(c(2L,
2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("07.29.2002",
"07.30.2002"), class = "factor"), Length = c(561L, 426L,
206L, 964L, 500L, 43L, 196L, 140L, 794L), Article = structure(c(8L,
3L, 6L, 1L, 5L, 4L, 8L, 2L, 7L), .Label = c("A tough question at the heart..",
"ADDED VALUE", "Cash fine to clear elderly...", "IN BRIEF…",
"Media: 'We want van Hoogstr…", "Token victory for HIV mother",
"US-scientist questions", "US scientist questions"), class = "factor")), .Names = c("ID",
"Source.File", "Newspaper", "Date", "Length", "Article"), class = "data.frame", row.names = c(NA,
-9L))
meta_articles.m <-
structure(list(ID = 1:9, Source.File = structure(c(1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L, 2L), .Label = c("aaa", "aab"), class = "factor"),
Newspaper = structure(c(2L, 2L, 2L, 1L, 2L, 3L, 4L, 4L, 5L
), .Label = c("Financial Times", "The Guardian", "The Mirror",
"The Sun", "The Times"), class = "factor"), Date = structure(c(2L,
2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("07.29.2002",
"07.30.2002"), class = "factor"), Length = c(561L, 426L,
206L, 964L, 500L, 43L, 196L, 140L, 794L), Article = structure(c(8L,
3L, 6L, 1L, 5L, 4L, 8L, 2L, 7L), .Label = c("A tough question at the heart..",
"ADDED VALUE", "Cash fine to clear elderly...", "IN BRIEF…",
"Media: 'We want van Hoogstr…", "Token victory for HIV mother",
"US-scientist questions", "US scientist questions"), class = "factor")), .Names = c("ID",
"Source.File", "Newspaper", "Date", "Length", "Article"), class = "data.frame", row.names = c(NA,
-9L))
meta_articles.m
?adist
adist(meta_articles.m$Article)
values <- adist(meta_articles.m$Article)
values[values > 2] <- NA
values
d
rownames(d) <- meta_articles.m$Article
d <- adist(meta_articles.m$Article)
rownames(d) <- meta_articles.m$Article
hc <- hclust(as.dist(d))
plot(hc)
rect.hclust(hc,k=3)
df <- data.frame(str,cutree(hc,k=3))
df
plot(hc)
?cutree
df <- data.frame(meta_articles.m$Article,cutree(hc,h=2))
df
meta_articles.m <-
structure(list(ID = 1:9, Source.File = structure(c(1L, 1L, 1L,
2L, 2L, 2L, 2L, 2L, 2L), .Label = c("aaa", "aab"), class = "factor"),
Newspaper = structure(c(2L, 2L, 2L, 1L, 2L, 3L, 4L, 4L, 5L
), .Label = c("Financial Times", "The Guardian", "The Mirror",
"The Sun", "The Times"), class = "factor"), Date = structure(c(2L,
2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("07.29.2002",
"07.30.2002"), class = "factor"), Length = c(561L, 426L,
206L, 964L, 500L, 43L, 196L, 140L, 794L), Article = structure(c(8L,
3L, 6L, 1L, 5L, 4L, 8L, 2L, 7L), .Label = c("A tough question at the heart..",
"IN BEEEF...", "Cash fine to clear elderly...", "IN BRIEF...",
"Media: 'We want van Hoogstr…", "Token victory for HIV mother",
"US-scientist questions", "US scientist questions"), class = "factor")), .Names = c("ID",
"Source.File", "Newspaper", "Date", "Length", "Article"), class = "data.frame", row.names = c(NA,
-9L))
d <- adist(meta_articles.m$Article)
for i in
values[values > 2] <- NA
d  <- adist(str)
rownames(d) <- meta_articles.m$Article
hc <- hclust(as.dist(d))
plot(hc)
rect.hclust(hc,k=3)
?cutree
df <- data.frame(meta_articles.m$Article,cutree(hc,h=2))
df
rect.hclust(hc,h=2)
plot(hc)
rect.hclust(hc,h=2)
rect.hclust(hc,h=3)
plot(hc)
rect.hclust(hc,h=3)
df[unique(df[,2]),]
df[unique(df[,2]),]
d <- adist(meta_articles.m$Article)
d  <- adist(str)
rownames(d) <- meta_articles.m$Article
hc <- hclust(as.dist(d))
plot(hc)
rect.hclust(hc,h=3)
df <- data.frame(meta_articles.m$Article,cutree(hc,h=2))
df
df[unique(df[,2]),]
library(data.table)
install.packages("data.table")
library(data.table)
setwd("C:/Data/Github/Analytics-and-Research")
library(data.table)
mydat <- fread("Basic Accreditation Report.csv")
mydat
mydat_melt <- melt(mydat)
mydat2 <- dcast(mydat_melt, .~year+response)
mydat_melt
mydat2 <- dcast(mydat_melt, .~YEAR+RESPONSE+NATIONAL_AVG)
mydat2 <- dcast(mydat_melt, ".~YEAR")
?melt
mydat
?recast
?dcast
mydat2 <- dcast(mydat_melt, ".~YEAR")
mydat_melt
mydat2 <- dcast(mydat, ".~YEAR")
mydat2
mydat2 <- dcast(mydat, "~YEAR*NATIONAL_AVG+YEAR*RESPONSE")
mydat2
mydat2 <- dcast(mydat, ".~YEAR*NATIONAL_AVG+YEAR*RESPONSE")
mydat2
mydat2 <- dcast(mydat, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR*NATIONAL_AVG+YEAR*RESPONSE")
mydat2
mydat2 <- dcast(mydat, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR")
mydat2
mydat
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR")
mydat2
mydat_melt <- melt(mydat, idvars= )
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR')" )
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR' )
)
)
)
)
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR' ))
mydat_melt
names(mydat)
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR'))
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR'),
measure.vars=c('RESPONSE','NATIONAL_AVG'))
mydat_melt
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR")
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR'),
measure.vars=c('RESPONSE'))
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR")
mydat2
view(mydat2)
View(mydat2)
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR+RESPONSE")
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR")
mydat2
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR", value.var="Value")
mydat_melt
mydat2 <- dcast(mydat_melt, "ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR", value.var="value")
mydat_melt <- melt(mydat, idvars=c('ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR'),
measure.vars=c('RESPONSE'))
mydat2 <- dcast(mydat_melt, ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR, value.var="value")
mydat2
row.names(mydat)
mydat$seq <-   row.names(mydat)
mydat2 <- dcast(mydat_melt, seq+ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR, value.var="value")
mydat_melt <- melt(mydat, idvars=c('seq','ACCOUNT','ACCR_CATEG','QUESTION_LABEL','YEAR'),
measure.vars=c('RESPONSE'))
mydat2 <- dcast(mydat_melt, seq+ACCOUNT+ACCR_CATEG+QUESTION_LABEL~YEAR, value.var="value")
mydat2
View(mydat2)
libary(ddply)
library(ddply)
install.packages("ddply")
install.packages("plyr")
library(plyr)
mydat <- fread("Basic Accreditation Report.csv")
mydat
View(mydat)
setDF(mydat)
mydat2 <- mydat[,-which((colnames(mydat)=="NATIONAL_AVG"))]
head(mydat2)
mymelt <-  ddply(mydat2, .(YEAR, ACCOUNT, ACCR_CATEG,QUESTION_LABEL), transform, newid=paste(
year, account, seq_along(question_label))
)
mymelt <-  ddply(mydat2, .(YEAR, ACCOUNT, ACCR_CATEG,QUESTION_LABEL), transform, newid=paste(
YEAR, ACCOUNT, seq_along(QUESTION_LABEL))
)
educ <- sample(c(1, 2), 200, replace = TRUE, prob = c(0.3, 0.7))
educ <- factor(educ, levels = c(1, 2), labels = c("Low", "High"))
opinion <- sample(c(1, 2, 9), 200, replace = TRUE,
prob = c(0.4, 0.55, 0.05))
opinion <- factor(opinion, levels = c(1, 2, 9),
labels = c("Disagree", "Agree", "Don't know"))
attr(educ, "label") <- "Education level"
attr(opinion, "label") <- "Opinion"
weight <- sample(c(10, 15, 19), 200, replace = TRUE)
crosstab(opinion, educ, xlab = "Education", ylab = "Opinion")
ct <- crosstab(opinion, educ, weight,
dnn = c("Opinion", "Education"),
user.missing.dep = "Don't know",
expected = TRUE, prop.c = TRUE, prop.r = TRUE,
plot = FALSE)
ct
plot(ct, inv.y = TRUE)
library(xtable)
print(xtable(ct))
# Add to the preamble of your Rnoweb document:
# \usepackage{booktabs}
# \usepackage{multirow}
# \usepackage{dcolumn}
# \newcolumntype{d}{D{.}{.}{-1}}
print(xtable(ct, align = "llddd", multirow = TRUE, hline = TRUE,
row.labels = TRUE, percent = FALSE,
caption = "Opinion according to level of education"),
booktabs = TRUE, include.rownames = FALSE,
sanitize.text.function = function(x) x)
install.packages("descr")
library(descr)
educ <- sample(c(1, 2), 200, replace = TRUE, prob = c(0.3, 0.7))
educ <- factor(educ, levels = c(1, 2), labels = c("Low", "High"))
opinion <- sample(c(1, 2, 9), 200, replace = TRUE,
prob = c(0.4, 0.55, 0.05))
opinion <- factor(opinion, levels = c(1, 2, 9),
labels = c("Disagree", "Agree", "Don't know"))
attr(educ, "label") <- "Education level"
attr(opinion, "label") <- "Opinion"
weight <- sample(c(10, 15, 19), 200, replace = TRUE)
crosstab(opinion, educ, xlab = "Education", ylab = "Opinion")
ct <- crosstab(opinion, educ, weight,
dnn = c("Opinion", "Education"),
user.missing.dep = "Don't know",
expected = TRUE, prop.c = TRUE, prop.r = TRUE,
plot = FALSE)
ct
plot(ct, inv.y = TRUE)
library(xtable)
print(xtable(ct))
# Add to the preamble of your Rnoweb document:
# \usepackage{booktabs}
# \usepackage{multirow}
# \usepackage{dcolumn}
# \newcolumntype{d}{D{.}{.}{-1}}
print(xtable(ct, align = "llddd", multirow = TRUE, hline = TRUE,
row.labels = TRUE, percent = FALSE,
caption = "Opinion according to level of education"),
booktabs = TRUE, include.rownames = FALSE,
sanitize.text.function = function(x) x)
